
# üèõÔ∏è –°—Ö–µ–º–∞ –ë–∞–∑—ã –î–∞–Ω–Ω—ã—Ö (DATABASE_SCHEMA)

**–§–∞–π–ª:** `main.db` (SQLite)
**–†–µ–∂–∏–º:** WAL (Write-Ahead Logging)

---

## 1. Projects (–†–∞–±–æ—á–∏–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞)
–¢–∞–±–ª–∏—Ü–∞ –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö —Ä–∞–∑–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ (–≤–æ—Ä–æ–Ω–æ–∫).

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|:--- |:--- |:--- |
| `id` | INTEGER PK | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –ø—Ä–æ–µ–∫—Ç–∞ |
| `name` | TEXT | –ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ |
| `color` | TEXT | –¶–≤–µ—Ç –º–µ—Ç–∫–∏ (HEX) |
| `created_at` | INTEGER | Timestamp —Å–æ–∑–¥–∞–Ω–∏—è |

---

## 2. Accounts (–ê–∫–∫–∞—É–Ω—Ç—ã –í–ö)
–¢–∞–±–ª–∏—Ü–∞ —Ç–æ–∫–µ–Ω–æ–≤ –∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞.

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|:--- |:--- |:--- |
| `id` | INTEGER PK | –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π ID |
| `project_id` | INTEGER | FK -> Projects.id |
| `vk_user_id` | TEXT | ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –í–ö–æ–Ω—Ç–∞–∫—Ç–µ |
| `access_token` | TEXT | –¢–æ–∫–µ–Ω –¥–æ—Å—Ç—É–ø–∞ |
| `status` | TEXT | 'OK', 'BANNED', 'INVALID' |
| `health_score` | INTEGER | –ó–¥–æ—Ä–æ–≤—å–µ —Ç–æ–∫–µ–Ω–∞ (0-100) |
| `kamikaze_mode` | INTEGER | 1 - —Ä–µ–∂–∏–º –±–µ–∑ –∑–∞—â–∏—Ç—ã |
| `cleanup_enabled` | INTEGER | –í–∫–ª/–≤—ã–∫–ª –∞–≤—Ç–æ-—á–∏—Å—Ç–∫—É –∏—Å—Ö–æ–¥—è—â–∏—Ö |
| `auto_accept_enabled` | INTEGER | –í–∫–ª/–≤—ã–∫–ª –∞–≤—Ç–æ-–ø—Ä–∏–µ–º –∑–∞—è–≤–æ–∫ |
| `cached_friends_list` | TEXT | CSV —Å–ø–∏—Å–æ–∫ ID –¥—Ä—É–∑–µ–π (–¥–ª—è –∫—ç—à–∞) |

---

## 3. Recipients (–ö–ª–∏–µ–Ω—Ç—ã/–ü–æ–ª—É—á–∞—Ç–µ–ª–∏)
–ë–∞–∑–∞ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ –¥–ª—è CRM –∏ —Ä–∞—Å—Å—ã–ª–æ–∫.

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|:--- |:--- |:--- |
| `id` | INTEGER PK | –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π ID |
| `vk_user_id` | TEXT | ID –ø–æ–ª—É—á–∞—Ç–µ–ª—è (–£–Ω–∏–∫–∞–ª—å–Ω–æ) |
| `project_id` | INTEGER | FK -> Projects.id |
| `status` | TEXT | 'queued', 'sent', 'chat', 'error' |
| `crm_status` | TEXT | 'new', 'progress', 'hot', 'success', 'reject' |
| `campaign_name` | TEXT | –ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞–º–ø–∞–Ω–∏–∏-–∏—Å—Ç–æ—á–Ω–∏–∫–∞ |
| `tags` | TEXT | –¢–µ–≥–∏ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é |
| `locked_by_account_id` | INTEGER | –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –¥–ª—è –≤–æ—Ä–∫–µ—Ä–∞ (—á—Ç–æ–±—ã –Ω–µ –ø–∏—Å–∞–ª–∏ –¥–≤–æ–µ) |

---

## 4. Templates (–®–∞–±–ª–æ–Ω—ã)
–¢–µ–∫—Å—Ç–æ–≤—ã–µ –∑–∞–≥–æ—Ç–æ–≤–∫–∏ –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π.

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|:--- |:--- |:--- |
| `id` | INTEGER PK | –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π ID |
| `project_id` | INTEGER | FK -> Projects.id |
| `name` | TEXT | –ù–∞–∑–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞ |
| `text` | TEXT | –¢–µ–∫—Å—Ç (–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç Spintax) |
| `campaign_name` | TEXT | –ü–∞–ø–∫–∞/–ö–∞–º–ø–∞–Ω–∏—è |
| `subtype` | TEXT | –¢–∏–ø (greeting, body, mixed) |

---

## 5. Conversations (–î–∏–∞–ª–æ–≥–∏)
–ö—ç—à —Å–ø–∏—Å–∫–∞ –¥–∏–∞–ª–æ–≥–æ–≤ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è.

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|:--- |:--- |:--- |
| `id` | TEXT PK | Format: `{account_id}_{peer_id}` |
| `owner_id` | TEXT | ID –Ω–∞—à–µ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ |
| `peer_id` | TEXT | ID —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞ |
| `unread_count` | INTEGER | –ö–æ–ª-–≤–æ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö |
| `campaign_name` | TEXT | –¢–µ–≥–∏ –∫–∞–º–ø–∞–Ω–∏–π (—Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å `|`) |

---

## 6. Messages (–ò—Å—Ç–æ—Ä–∏—è –ø–µ—Ä–µ–ø–∏—Å–∫–∏)
–õ–æ–∫–∞–ª—å–Ω—ã–π –∞—Ä—Ö–∏–≤ —Å–æ–æ–±—â–µ–Ω–∏–π.

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|:--- |:--- |:--- |
| `id` | INTEGER PK | ID —Å–æ–æ–±—â–µ–Ω–∏—è –í–ö |
| `conversation_id` | TEXT | FK -> Conversations.id |
| `sender` | TEXT | 'me' –∏–ª–∏ 'them' |
| `text` | TEXT | –¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è |
| `date` | INTEGER | Timestamp |
| `attachments` | TEXT | JSON —Å –≤–ª–æ–∂–µ–Ω–∏—è–º–∏ |

---

## 7. Logs (–õ–æ–≥–∏)
–°–∏—Å—Ç–µ–º–Ω—ã–µ –∂—É—Ä–Ω–∞–ª—ã.

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|:--- |:--- |:--- |
| `level` | TEXT | INFO, WARNING, ERROR |
| `message` | TEXT | –¢–µ–∫—Å—Ç —Å–æ–±—ã—Ç–∏—è |
| `timestamp` | TEXT | –í—Ä–µ–º—è —Å–æ–±—ã—Ç–∏—è |
